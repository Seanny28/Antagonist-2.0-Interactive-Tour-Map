<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Tour Map + Sets</title>

  <!-- Leaflet CSS/JS -->
  <link
    rel="stylesheet"
    href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    crossorigin=""
  />
  <script
    src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
    crossorigin=""
    defer
  ></script>

  <style>
    :root {
      --bg: #0c0c0f;
      --panel: #111117;
      --text: #eaeaea;
      --muted: #a7a7b1;
      --accent: #f13b56;
      --accent-2: #2b2b37;
      --border: #1b1b24;
    }
    * { box-sizing: border-box; }
    html, body { height: 100%; }
    body {
      margin: 0;
      color: var(--text);
      background: var(--bg);
      font: 14px/1.45 system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
    }
    .app {
      display: grid;
      grid-template-columns: 1fr 420px;
      grid-template-rows: 100vh;
      height: 100vh;
      width: 100%;
    }
    #map { width: 100%; height: 100%; }

    /* Right Panel */
    .panel {
      display: flex;
      flex-direction: column;
      background: linear-gradient(180deg, #111117, #0f0f15);
      border-left: 1px solid var(--border);
      min-width: 320px;
      max-width: 600px;
    }
    .panel-header {
      padding: 14px 16px;
      border-bottom: 1px solid var(--border);
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 12px;
    }
    .title {
      font-weight: 700;
      letter-spacing: .2px;
    }
    .tabs {
      display: grid;
      grid-auto-flow: column;
      gap: 6px;
      background: var(--accent-2);
      border: 1px solid var(--border);
      padding: 4px;
      border-radius: 999px;
    }
    .tab-btn {
      border: 0;
      background: transparent;
      color: var(--muted);
      padding: 8px 12px;
      border-radius: 999px;
      cursor: pointer;
      font-weight: 600;
    }
    .tab-btn.active {
      background: var(--bg);
      color: var(--text);
      box-shadow: inset 0 0 0 1px var(--border);
    }
    .panel-body {
      overflow: auto;
      height: 100%;
      padding: 12px 14px 18px;
    }
    .section-label {
      color: var(--muted);
      text-transform: uppercase;
      font-size: 11px;
      letter-spacing: .12em;
      margin: 12px 2px 8px;
    }
    .card {
      border: 1px solid var(--border);
      background: #101018;
      border-radius: 14px;
      padding: 12px;
      margin-bottom: 10px;
    }
    .city {
      font-weight: 700;
      margin-bottom: 6px;
    }
    .meta {
      color: var(--muted);
      font-size: 12px;
    }
    .list {
      display: grid;
      gap: 8px;
    }
    .list-item {
      display: grid;
      gap: 2px;
      border: 1px solid var(--border);
      background: #0e0e14;
      padding: 10px;
      border-radius: 12px;
      cursor: pointer;
    }
    .list-item:hover { border-color: #2a2a38; }
    .button-row {
      display: flex; gap: 8px; margin-top: 10px; flex-wrap: wrap;
    }
    .chip {
      border: 1px solid var(--border);
      background: #0d0d13;
      padding: 6px 10px;
      border-radius: 999px;
      font-size: 12px;
      color: var(--muted);
    }
    .cta {
      background: var(--accent);
      color: white;
      border: none;
      border-radius: 10px;
      padding: 8px 12px;
      font-weight: 700;
      cursor: pointer;
    }

    /* Mobile: panel overlays map, collapsible header */
    @media (max-width: 900px) {
      .app {
        grid-template-columns: 1fr;
        grid-template-rows: auto 1fr;
      }
      #map { height: 45vh; }
      .panel { grid-row: 2; }
      .panel-body {
        /* When you scroll the list, the map stays accessible via jumping back to top */
        overscroll-behavior: contain;
      }
    }
  </style>
</head>
<body>
  <div class="app">
    <div id="map" aria-label="Show map"></div>

    <aside class="panel" aria-label="Details panel">
      <div class="panel-header">
        <div class="title">Tour Explorer</div>
        <div class="tabs">
          <button id="song-stats-tab" class="tab-btn active" type="button">Song Stats</button>
          <button id="show-list-tab" class="tab-btn" type="button">Show List</button>
        </div>
      </div>
      <div id="panel-body" class="panel-body">
        <!-- Rendered content goes here -->
      </div>
    </aside>
  </div>

  <script>
    // ---------- 0. Utilities ----------
    function formatDate(iso) {
      try {
        const d = new Date(iso);
        return d.toLocaleDateString(undefined, { month: "short", day: "numeric", year: "numeric" });
      } catch {
        return iso;
      }
    }
    function groupBy(arr, keyFn) {
      const m = new Map();
      for (const item of arr) {
        const k = keyFn(item);
        if (!m.has(k)) m.set(k, []);
        m.get(k).push(item);
      }
      return m;
    }
    function byCountDesc(a, b) { return b[1] - a[1]; }
    function escapeHtml(s) {
      return String(s).replace(/[&<>"']/g, m => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m]));
    }


    // --------- 1. Data for shows (SLC + Portland) ---------

    const shows = [
      {
        city: "Salt Lake City",
        state: "UT",
        venue: "Delta Center",
        date: "2025-10-03",
        lat: 40.7683,
        lon: -111.9011,
        defaultArtistIndex: 4, // Playboi Carti as default tab
        artists: [
          {
            name: "ApolloRed1",
            onstage: "8:00 PM",
            songs: [
              "#ARP (Live debut)",
              "Georgia Boy",
              "RedFlag",
              "Face Tattoos",
              "PBrazy"
            ],
            uniqueSongs: ["#ARP (Live debut)"],
            albumStats: {
              "Midnight Blassic": 3,
              "ApolloRed1 Vs the World": 1,
              "Tantrum": 1
            }
          },
          {
            name: "Homixide Gang",
            onstage: "8:25 PM",
            songs: [
              "Lifestyle (shortened)",
              "PC5",
              "REDDRAG",
              "VILLAIN",
              "5G",
              "R50",
              "FACET!ME",
              "Uzi Work",
              "Drakon!",
              "5unna"
            ],
            uniqueSongs: [],
            albumStats: {
              "Homixide Lifestyle 2": 5,
              "Homixide Lifestyle": 2,
              "i5u5we5": 1,
              "Snot or Not": 1,
              "Snotty World": 1
            }
          },
          {
            name: "Destroy Lonely",
            onstage: "9:00 PM",
            songs: [
              "party n get high (interlude) (Live debut)",
              "how u feel?",
              "FAKENGGAS (shortened)",
              "SYRUP SIPPIN",
              "jumanji",
              "if looks could kill",
              "NOSTYLIST",
              "DOUBT IT (shortened)",
              "screwed up",
              "ABOUT MONEY (shortened)",
              "BLITZ (shortened)",
              "risk",
              "soooo high (Live debut; shortened)",
              "stfu"
            ],
            uniqueSongs: [
              "party n get high (interlude) (Live debut)",
              "soooo high (Live debut; shortened)"
            ],
            albumStats: {
              "<3³": 6,
              "LOVE LASTS FOREVER": 3,
              "NO STYLIST": 3,
              "If Looks Could Kill": 2
            }
          },
          {
            name: "Ken Carson",
            onstage: "9:50 PM",
            songs: [
              "Lord Of Chaos (shortened)",
              "Blakk Rokkstar",
              "Money Spread",
              "delusional",
              "It's Over",
              "Lose It",
              "LiveLeak",
              "Green Room",
              "mewtwo (Intro into i need u)",
              "i need u",
              "Succubus",
              "Me N My Kup (shortened)",
              "Rock N Roll",
              "Trap Jump",
              "Freestyle 2",
              "ss",
              "overseas",
              "Fighting My Demons"
            ],
            uniqueSongs: [],
            albumStats: {
              "A Great Chaos": 10,
              "More Chaos": 5,
              "Project X": 1,
              "X": 1,
              "Others": 1
            }
          },
          {
            name: "Playboi Carti",
            onstage: "10:55 PM",
            songs: [
              "POP OUT",
              "POP OUT (played again)",
              "OPM BABI",
              "CRANK",
              "COCAINE NOSE",
              "OVERLY",
              "CHARGE DEM HOES A FEE",
              "K POP",
              "LIKE WEEZY",
              "GOOD CREDIT",
              "HBA",
              "Can You Stand the Rain (New Edition song)",
              "Timeless (The Weeknd cover)",
              "WAKE UP F1LTHY (Live debut)",
              "Stop Breathing",
              "Rockstar Made",
              "ALIVE",
              "FOMDJ",
              "EVIL JORDAN",
              "R.I.P.",
              "ILoveUIHateU",
              "2024",
              "FE!N (Travis Scott cover)",
              "Type Shit (Future & Metro Boomin cover)",
              "Long Time (Intro)",
              "POP OUT (played again; shortened)",
              "POP OUT (played again)",
              "POP OUT (played again)",
              "POP OUT (played one last time)"
            ],
            uniqueSongs: ["WAKE UP F1LTHY (Live debut)"],
            albumStats: {
              "MUSIC": 20,
              "Whole Lotta Red": 3,
              "Covers": 3,
              "Die Lit": 2,
              "Others": 1
            }
          }
        ]
      },

      {
        city: "Portland",
        state: "OR",
        venue: "Moda Center",
        date: "2025-10-05",
        lat: 45.5316,
        lon: -122.6668,
        defaultArtistIndex: 4, // Carti
        artists: [
          {
            name: "ApolloRed1",
            onstage: "7:00 PM",
            songs: [
              "#ARP",
              "Georgia Boy",
              "RedFlag",
              "Face Tattoos",
              "PBrazy"
            ],
            uniqueSongs: [],
            albumStats: {
              "Midnight Blassic": 3,
              "ApolloRed1 Vs the World": 1,
              "Tantrum": 1
            }
          },
          {
            name: "Homixide Gang",
            onstage: "7:21 PM",
            songs: [
              "Lifestyle",
              "PC5",
              "REDDRAG",
              "VILLAIN",
              "5G",
              "R50",
              "FACET!ME",
              "Uzi Work",
              "Drakon!",
              "5unna"
            ],
            uniqueSongs: [],
            albumStats: {
              "Homixide Lifestyle 2": 5,
              "Homixide Lifestyle": 2,
              "i5u5we5": 1,
              "Snot or Not": 1,
              "Snotty World": 1
            }
          },
          {
            name: "Destroy Lonely",
            onstage: "7:53 PM",
            songs: [
              "show u how (Live debut)",
              "LOCK IN (tour debut; shortened)",
              "how u feel?",
              "FAKENGGAS",
              "SYRUP SIPPIN",
              "jumanji",
              "if looks could kill",
              "NOSTYLIST",
              "DOUBT IT (shortened)",
              "screwed up",
              "stfu",
              "ABOUT MONEY",
              "BLITZ",
              "risk",
              "soooo high"
            ],
            uniqueSongs: [
              "show u how (Live debut)",
              "LOCK IN (tour debut; shortened)"
            ],
            albumStats: {
              "<3³": 6,
              "LOVE LASTS FOREVER": 4,
              "NO STYLIST": 3,
              "If Looks Could Kill": 2
            }
          },
          {
            name: "Ken Carson",
            onstage: "8:36 PM",
            songs: [
              "Lord Of Chaos",
              "Blakk Rokkstar",
              "Money Spread",
              "delusional",
              "It's Over",
              "Lose It",
              "LiveLeak",
              "Green Room",
              "mewtwo",
              "i need u",
              "Succubus",
              "Me N My Kup",
              "Rock N Roll",
              "Trap Jump",
              "Freestyle 2",
              "ss",
              "overseas",
              "Fighting My Demons"
            ],
            uniqueSongs: [],
            albumStats: {
              "A Great Chaos": 10,
              "More Chaos": 5,
              "Project X": 1,
              "X": 1,
              "Others": 1
            }
          },
          {
            name: "Playboi Carti",
            onstage: "9:45 PM",
            songs: [
              "POP OUT",
              "POP OUT (played again)",
              "OPM BABI",
              "CRANK",
              "COCAINE NOSE",
              "OVERLY",
              "CHARGE DEM HOES A FEE",
              "K POP",
              "LIKE WEEZY",
              "GOOD CREDIT",
              "HBA",
              "Control (tour debut)",
              "Timeless (The Weeknd cover)",
              "WAKE UP F1LTHY",
              "Stop Breathing",
              "Rockstar Made",
              "ALIVE",
              "FOMDJ",
              "EVIL JORDAN",
              "R.I.P.",
              "ILoveUIHateU",
              "2024",
              "OLYMPIAN"
            ],
            uniqueSongs: ["Control (tour debut)"],
            albumStats: {
              "MUSIC": 16,
              "Whole Lotta Red": 4,
              "Die Lit": 1,
              "Others": 1,
              "Covers": 1
            }
          }
        ]
      },

      {
        city: "Seattle",
        state: "WA",
        venue: "Climate Pledge Arena",
        date: "2025-10-08",
        lat: 47.622,
        lon: -122.354,
        defaultArtistIndex: 4, // Carti
        artists: [
          {
            name: "ApolloRed1",
            onstage: "7:05 PM",
            songs: [
              "#ARP",
              "Georgia Boy",
              "RedFlag",
              "Face Tattoos",
              "PBrazy",
	      "Profit"
            ],
            uniqueSongs: ["Tour Debut of 'Profit'"],
            albumStats: {
              "Midnight Blassic": 3,
              "ApolloRed1 Vs the World": 2,
              "Tantrum": 1
            }
          },
          {
            name: "Homixide Gang",
            onstage: "7:25 PM",
            songs: [
              "Pick A Side",
              "PC5",
              "REDDRAG",
              "VILLAIN",
              "5G",
              "R50",
              "FACET!ME",
              "Uzi Work",
              "Drakon!",
              "5unna"
            ],
            uniqueSongs: ["Pick A Side (live debut)"],
            albumStats: {
              "Homixide Lifestyle 2": 5,
              "Homixide Lifestyle": 1,
              "i5u5we5": 1,
              "Snot or Not": 1,
              "Snotty World": 1,
	      "Other": 1
            }
          },
          {
            name: "Destroy Lonely",
            onstage: "8:00 PM",
            songs: [
              "jumanji",
              "LOCK IN",
              "how u feel?",
              "FAKENGGAS",
              "SYRUP SIPPIN",
              "show u how",
              "if looks could kill",
              "NOSTYLIST",
              "DOUBT IT",
              "screwed up",
              "stfu",
              "ABOUT MONEY",
              "BLITZ",
              "risk",
              "soooo high"
            ],
            uniqueSongs: [],
            albumStats: {
              "<3³": 6,
              "LOVE LASTS FOREVER": 4,
              "NO STYLIST": 3,
              "If Looks Could Kill": 2
            }
          },
          {
            name: "Ken Carson",
            onstage: "8:36 PM",
            songs: [
              "Lord Of Chaos",
              "Blakk Rokkstar (Intro played but paused when fans rushed floor)",
              "Rock N Roll (Came back after long pause)"
            ],
            uniqueSongs: ["Set cut off early due to crowd rushing the floor"],
            albumStats: {
              "More Chaos": 2,
              "Project X": 1
            }
          },
          {
            name: "Playboi Carti",
            onstage: "9:50 PM",
            songs: [
              "POP OUT",
              "POP OUT (played again)",
              "OPM BABI",
              "CRANK",
              "COCAINE NOSE",
              "OVERLY",
              "CHARGE DEM HOES A FEE",
              "K POP",
              "LIKE WEEZY",
              "GOOD CREDIT",
              "HBA",
	      "ss (with Ken Carson)",
	      "Fighting My Demons (with Ken Carson)",
              "Control",
	      "On That Time (Tour Debut)",
              "Timeless (The Weeknd cover)",
              "WAKE UP F1LTHY",
              "FOMDJ",
              "EVIL JORDAN",
              "R.I.P.",
              "ILoveUIHateU",
              "2024",
              "OLYMPIAN",
	      "POP OUT (Played Again)",
	      "Shoota (Tour Debut)",
	      "FE!N (Travis Scott cover)",
	      "Location (Tour Debut)",
	      "Long Time (Intro)",
	      "Alive",
	      "Made It This Far (Live Debut, unreleased)"
            ],
            uniqueSongs: [
	      "Ken Carson on stage with Carti", 
	      "'On That Time' tour debut",
	      "'Shoota' tour debut", 
	      "'Location' tour debut", 
	      "'Made It This Far' live debut"
	    ],
            albumStats: {
              "MUSIC": 17,
              "Whole Lotta Red": 5,
              "Die Lit": 3,
              "Others": 2,
              "Covers": 4,
	      "Playboi Carti": 1
            }
          }
        ]
      },
		 {
        city: "San Francisco",
        state: "CA",
        venue: "Chase Center",
        date: "2025-10-10",
        lat: 37.76806,
        lon: -122.38750,
        defaultArtistIndex: 4, // Playboi Carti as default tab
        artists: [
          {
            name: "ApolloRed1",
            onstage: "7:00 PM",
            songs: [
              "(unknown)",
			  "Face Tattoos",
              "Georgia Boy",
              "RedFlag",
              "Profit"
            ],
            uniqueSongs: [],
            albumStats: {
              "Midnight Blassic": 2,
              "ApolloRed1 Vs the World": 1,
              "Tantrum": 1
            }
          },
          {
            name: "Homixide Gang",
            onstage: "7:20 PM",
            songs: [
              "K9ine (new song, live debut)",
              "PC5",
              "REDDRAG",
              "VILLAIN",
              "5G (shortened)",
              "R50",
              "FACET!ME",
              "Uzi Work",
              "Drakon!",
              "Lifestyle"
            ],
            uniqueSongs: ["K9ine live debut"],
            albumStats: {
              "Homixide Lifestyle 2": 5,
              "Homixide Lifestyle": 2,
              "i5u5we5": 1,
              "Snot or Not": 1,
			  "Others": 1
            }
          },
          {
            name: "Destroy Lonely",
            onstage: "7:50 PM",
            songs: [
              "jumanji",
              "LOCK IN",
			  "how u feel?",
              "FAKENGGAS",
              "SYRUP SIPPIN",
              "show u how",
              "if looks could kill",
              "NOSTYLIST",
              "DOUBT IT",
              "screwed up",
              "stfu",
              "about money",
              "BLITZ",
			  "risk",
              "soooo high"
            ],
            uniqueSongs: [
              "jumanji different instrumental"
            ],
            albumStats: {
              "<3³": 6,
              "LOVE LASTS FOREVER": 4,
              "NO STYLIST": 3,
              "If Looks Could Kill": 2
            }
          },
          {
            name: "Ken Carson",
            onstage: "8:35 PM",
            songs: [
              "Lord Of Chaos (shortened)",
              "Blakk Rokkstar",
              "Money Spread",
              "delusional",
              "It's Over",
              "Lose It",
              "LiveLeak",
              "Green Room",
              "mewtwo (shortened)",
              "i need u",
              "Succubus",
              "Me N My Kup",
              "Rock N Roll",
              "Trap Jump",
              "Freestyle 2",
              "ss (first half)",
              "overseas",
              "Fighting My Demons"
            ],
            uniqueSongs: [],
            albumStats: {
              "A Great Chaos": 10,
              "More Chaos": 5,
              "Project X": 1,
              "X": 1,
              "Others": 1
            }
          },
          {
            name: "Playboi Carti",
            onstage: "9:45 PM",
            songs: [
              "POP OUT",
              "POP OUT (played again)",
              "OPM BABI",
              "CRANK",
              "COCAINE NOSE",
              "OVERLY",
              "CHARGE DEM HOES A FEE",
              "K POP",
              "LIKE WEEZY",
              "GOOD CREDIT",
              "HBA",
              "ss (with Ken Carson)",
              "Fighting My Demons (With Ken Carson)",
              "Stop Breathing",
              "On That Time",
              "Rockstar Made",
              "R.I.P.",
              "Rockstar (unreleased)",
              "Timeless (The Weeknd cover)",
              "EVIL JORDAN",
              "ILoveUIHateU",
              "Die4Guy",
              "Shoota",
              "Location",
              "Long Time (Intro)",
              "Sky (Tour Debut)",
              "FE!N (Travis Scott cover)",
				"TOXIC (Tour debut)",
				"OLYMPIAN",
				"Made It This Far (Unreleased)"
            ],
            uniqueSongs: ["Ken Carson on stage with Carti", 
						  "'Sky' tour debut",
						  "'TOXIC' tour debut"
						 ],
            albumStats: {
              "MUSIC": 14,
              "Whole Lotta Red": 6,
              "Covers": 4,
              "Die Lit": 3,
              "Others": 2,
				"Playboi Carti": 1
            }
          }
        ]
      },
		{
  city: "Sacramento",
  state: "CA",
  venue: "Golden 1 Center",
  date: "2025-10-12",
  lat: 38.580361,
  lon: -121.499611,
  defaultArtistIndex: 4,
  artists: [
    {
      name: "ApolloRed1",
      onstage: "7:06 PM",
      songs: [
        "Georgia Boy",
        "Face Tattoos"
      ],
      uniqueSongs: [],
      albumStats: {
        "Midnight Blassic": 2
      }
    },
    {
      name: "Homixide Gang",
      onstage: "7:20 PM",
      songs: [
        "Blick (Live debut, unreleased)",
        "5G",
        "R50",
        "Uzi Work",
        "Drakon !",
        "Lifestyle"
      ],
      uniqueSongs: ["Blick (Live debut, unreleased)"],
      albumStats: {
        "Homixide Lifestyle": 2,
        "Homixide Lifestyle 2": 1,
        "i5u5we5": 1,
        "Snot or Not": 1,
        "Others": 1
      }
    },
    {
      name: "Destroy Lonely",
      onstage: "7:54 PM",
      songs: [
        "LOCK IN",
        "jumanji",
        "SYRUP SIPPIN",
        "DOUBT IT",
        "BLITZ",
        "FAKENGGAS",
        "ABOUT MONEY",
        "catch a kill (Tour debut)",
        "screwed up",
        "risk",
        "how u feel?",
        "NEVEREVER (Tour debut)",
        "NOSTYLIST",
        "if looks could kill"
      ],
      uniqueSongs: [
        "catch a kill (Tour debut)",
        "NEVEREVER (Tour debut)"
      ],
      albumStats: {
        "LOVE LASTS FOREVER": 4,
        "NO STYLIST": 4,
        "<3³": 3,
        "If Looks Could Kill": 3
      }
    },
    {
      name: "Ken Carson",
      onstage: "8:38 PM",
      songs: [
        "Lord Of Chaos",
        "Blakk Rokkstar",
        "Money Spread",
        "delusional",
        "It's Over",
        "Lose It",
        "Green Room",
        "mewtwo",
        "i need u",
        "Succubus",
        "Me N My Kup",
        "Rock N Roll",
        "Freestyle 2",
        "ss",
        "overseas",
        "Fighting My Demons"
      ],
      uniqueSongs: [],
      albumStats: {
        "A Great Chaos": 10,
        "More Chaos": 3,
        "Project X": 1,
        "X": 1,
        "Others": 1
      }
    },
    {
      name: "Playboi Carti",
      onstage: "9:30 PM",
      songs: [
        "POP OUT",
        "POP OUT (Played again)",
        "OPM BABI",
        "CRANK",
        "COCAINE NOSE",
        "OVERLY",
        "CHARGE DEM HOES A FEE",
        "K POP",
        "LIKE WEEZY",
        "GOOD CREDIT",
        "HBA",
        "Rock N Roll (Ken Carson cover) (with Ken Carson)",
        "ss (Ken Carson cover) (with Ken Carson)",
        "Stop Breathing",
        "On That Time",
        "Rockstar Made",
        "R.I.P.",
        "Rockstar (New song)",
        "Timeless (The Weeknd cover)",
        "EVIL JORDAN",
        "ILoveUIHateU",
        "2024",
        "Shoota",
        "Location",
        "Long Time (Intro)",
        "Sky",
        "FE!N (Travis Scott cover)",
        "TOXIC",
        "OLYMPIAN",
        "Made It This Far",
        "Fine Shit"
      ],
      uniqueSongs: [
        "Rockstar (New song)",
        "Timeless (The Weeknd cover)",
        "Fine Shit"
      ],
      albumStats: {
        "MUSIC": 15,
        "Whole Lotta Red": 5,
        "Covers": 4,
        "Die Lit": 3,
        "Others": 2,
        "Playboi Carti": 1
      }
    }
  ]
},
		{
  city: "Los Angeles",
  state: "CA",
  venue: "Crypto.com Arena",
  date: "2025-10-14",
  lat: 34.043,
  lon: -118.267,
  defaultArtistIndex: 4,
  artists: [
    {
      name: "ApolloRed1",
      onstage: "N/A",
      songs: [
        "Georgia Boy",
        "RedFlag",
        "Face Tattoos",
        "PBrazy",
        "Profit"
      ],
      uniqueSongs: [],
      albumStats: {
        "Midnight Blassic": 3,
        "ApolloRed1 Vs the World": 1,
        "Tantrum": 1
      }
    },
    {
      name: "Homixide Gang",
      onstage: "N/A",
      songs: [
        "Pick A Side (unreleased)",
        "Lifestyle",
        "PC5",
        "VILLAIN",
        "REDRAG",
        "5G",
        "R50",
        "FACET!ME",
        "Uzi Work",
        "Drakon !"
      ],
      uniqueSongs: [],
      albumStats: {
        "Homixide Lifestyle 2": 5,
        "Homixide Lifestyle": 2,
        "i5u5we5": 1,
        "Snot or Not": 1,
        "Others": 1
      }
    },
    {
      name: "Destroy Lonely",
      onstage: "N/A",
      songs: [
        "LOCK IN",
        "jumanji",
        "SYRUP SIPPIN",
        "DOUBT IT",
        "BLITZ",
        "FAKENGGAS",
        "ABOUT MONEY",
        "catch a kill",
        "screwed up",
        "risk",
        "how u feel?",
        "NEVEREVER",
        "NOSTYLIST",
        "if looks could kill"
      ],
      uniqueSongs: [],
      albumStats: {
        "LOVE LASTS FOREVER": 4,
        "NO STYLIST": 4,
        "<3³": 3,
        "If Looks Could Kill": 3
      }
    },
    {
      name: "Ken Carson",
      onstage: "N/A",
      songs: [
        "Lord Of Chaos",
        "Blakk Rokkstar",
        "Money Spread",
        "delusional",
        "It's Over",
        "Lose It",
        "LiveLeak",
        "Green Room",
        "mewtwo (shortened)",
        "i need u",
        "Succubus",
        "Me N My Kup",
        "Rock N Roll",
        "Trap Jump",
        "Freestyle 2",
        "ss",
        "overseas",
        "Fighting My Demons"
      ],
      uniqueSongs: [],
      albumStats: {
        "A Great Chaos": 10,
        "More Chaos": 5,
        "Project X": 1,
        "X": 1,
        "Others": 1
      }
    },
    {
      name: "Playboi Carti",
      onstage: "N/A",
      songs: [
        "POP OUT",
        "POP OUT (played again)",
        "OPM BABI",
        "CRANK",
        "COCAINE NOSE",
        "OVERLY",
        "CHARGE DEM HOES A FEE",
        "K POP",
        "LIKE WEEZY",
        "GOOD CREDIT (with Kendrick Lamar)",
        "HBA",
        "Stop Breathing",
        "On That Time",
        "Rockstar Made",
        "R.I.P.",
        "Rockstar (New song)",
        "Timeless (The Weeknd cover)",
        "EVIL JORDAN",
        "ILoveUIHateU",
        "2024",
        "Shoota",
        "Location",
        "Long Time (Intro)",
        "Sky",
        "FE!N (Travis Scott cover)",
        "TOXIC",
        "OLYMPIAN",
        "Made It This Far (New song)",
        "Fine Shit"
      ],
      uniqueSongs: [
        "Rockstar (New song)",
        "Timeless (The Weeknd cover)",
        "Made It This Far (New song)",
        "Fine Shit"
      ],
      albumStats: {
        "MUSIC": 15,
        "Whole Lotta Red": 5,
        "Die Lit": 3,
        "Others": 2,
        "Covers": 2,
        "Playboi Carti": 1
      }
    }
  ]
},
		{
  city: "Phoenix",
  state: "AZ",
  venue: "Mortgage Matchup Center",
  date: "2025-10-17",
  lat: 33.445,
  lon: -112.071,
  defaultArtistIndex: 4,
  artists: [
    {
      name: "ApolloRed1",
      onstage: "N/A",
      songs: [
        "Georgia Boy",
        "RedFlag",
        "Face Tattoos",
        "PBrazy",
        "Profit"
      ],
      uniqueSongs: [],
      albumStats: {
        "Midnight Blassic": 3,
        "ApolloRed1 Vs the World": 1,
        "Tantrum": 1
      }
    },
    {
      name: "Homixide Gang",
      onstage: "N/A",
      songs: [
        "Pick A Side (Unreleased)",
        "PC5",
        "REDRAG",
        "VILLAIN",
        "5G",
        "R50",
        "FACET!ME",
        "Uzi Work",
        "Drakon !",
        "Lifestyle"
      ],
      uniqueSongs: [],
      albumStats: {
        "Homixide Lifestyle 2": 5,
        "Homixide Lifestyle": 2,
        "i5u5we5": 1,
        "Snot or Not": 1,
        "Others": 1
      }
    },
    {
      name: "Destroy Lonely",
      onstage: "N/A",
      songs: [
        "LOCK IN",
        "jumanji",
        "SYRUP SIPPIN",
        "DOUBT IT",
        "BLITZ",
        "FAKENGGAS",
        "ABOUT MONEY",
        "catch a kill",
        "screwed up",
        "risk",
        "how u feel?",
        "NEVEREVER",
        "NOSTYLIST",
        "if looks could kill"
      ],
      uniqueSongs: [],
      albumStats: {
        "LOVE LASTS FOREVER": 4,
        "NO STYLIST": 4,
        "<3³": 3,
        "If Looks Could Kill": 3
      }
    },
    {
      name: "Ken Carson",
      onstage: "N/A",
      songs: [
        "Lord Of Chaos",
        "Blakk Rokkstar",
        "Money Spread",
        "delusional",
        "It's Over",
        "Lose It",
        "Green Room",
        "mewtwo",
        "i need u",
        "Succubus",
        "Me N My Kup",
        "Rock N Roll",
        "Freestyle 2",
        "ss",
        "overseas",
        "Fighting My Demons"
      ],
      uniqueSongs: [],
      albumStats: {
        "A Great Chaos": 10,
        "More Chaos": 3,
        "Project X": 1,
        "X": 1,
        "Others": 1
      }
    },
    {
      name: "Playboi Carti",
      onstage: "N/A",
      songs: [
        "POP OUT",
        "POP OUT (Played again)",
        "OPM BABI",
        "CRANK",
        "COCAINE NOSE",
        "OVERLY",
        "CHARGE DEM HOES A FEE",
        "K POP",
        "LIKE WEEZY",
        "GOOD CREDIT",
        "HBA",
        "Stop Breathing",
        "On That Time",
        "Rockstar Made",
        "R.I.P.",
        "Rockstar (New song)",
        "Timeless (The Weeknd cover)",
        "EVIL JORDAN",
        "ILoveUIHateU",
        "2024",
        "Shoota",
        "Location",
        "Long Time (Intro)",
        "Sky",
        "FE!N (Travis Scott cover)",
        "TOXIC",
        "OLYMPIAN",
        "Made It This Far (New song)"
      ],
      uniqueSongs: [
        "Rockstar (New song)",
        "Timeless (The Weeknd cover)",
        "Made It This Far (New song)"
      ],
      albumStats: {
        "MUSIC": 15,
        "Whole Lotta Red": 5,
        "Die Lit": 3,
        "Others": 2,
        "Covers": 2,
        "Playboi Carti": 1
      }
    }
  ]
},
		{
  city: "Las Vegas",
  state: "NV",
  venue: "MGM Grand Garden Arena",
  date: "2025-10-18",
  lat: 36.102,
  lon: -115.171,
  defaultArtistIndex: 4,
  artists: [
    {
      name: "ApolloRed1",
      onstage: "N/A",
      songs: [
        "Georgia Boy",
        "RedFlag",
        "Face Tattoos",
        "PBrazy",
        "Profit"
      ],
      uniqueSongs: [],
      albumStats: {
        "Midnight Blassic": 3,
        "ApolloRed1 Vs the World": 1,
        "Tantrum": 1
      }
    },
    {
      name: "Homixide Gang",
      onstage: "N/A",
      songs: [
        "Pick A Side (unreleased)",
        "Lifestyle",
        "PC5",
        "REDRAG",
        "VILLAIN",
        "5G",
        "R50",
        "FACET!ME",
        "Uzi Work",
        "Drakon !"
      ],
      uniqueSongs: [],
      albumStats: {
        "Homixide Lifestyle 2": 5,
        "Homixide Lifestyle": 2,
        "i5u5we5": 1,
        "Snot or Not": 1,
        "Others": 1
      }
    },
    {
      name: "Playboi Carti",
      onstage: "N/A",
      songs: [
        "POP OUT",
        "POP OUT (played again)",
        "OPM BABI",
        "CRANK",
        "COCAINE NOSE",
        "OVERLY",
        "CHARGE DEM HOES A FEE",
        "K POP",
        "LIKE WEEZY",
        "GOOD CREDIT",
        "HBA",
        "Stop Breathing",
        "On That Time",
        "Rockstar Made",
        "R.I.P.",
        "Rockstar (New song)",
        "Timeless (The Weeknd cover)",
        "EVIL JORDAN",
        "ILoveUIHateU",
        "2024",
        "Shoota",
        "Location",
        "Long Time (Intro)",
        "Sky",
        "FE!N (Travis Scott cover)",
        "TOXIC",
        "OLYMPIAN",
        "Made It This Far (New song)"
      ],
      uniqueSongs: [
        "Rockstar (New song)",
        "Timeless (The Weeknd cover)",
        "Made It This Far (New song)"
      ],
      albumStats: {
        "MUSIC": 15,
        "Whole Lotta Red": 5,
        "Die Lit": 3,
        "Others": 2,
        "Covers": 2,
        "Playboi Carti": 1
      }
    }
  ]
},

{
  city: "Denver",
  state: "CO",
  venue: "Ball Arena",
  date: "2025-10-20",
  lat: 39.748,
  lon: -105.007,
  defaultArtistIndex: 4,
  artists: [
    {
      name: "ApolloRed1",
      onstage: "7:00 PM",
      songs: [
        "#ARP",
        "Georgia Boy",
        "RedFlag",
        "Face Tattoos",
        "PBrazy",
        "Profit"
      ],
      uniqueSongs: ["#ARP (new addition to set)"],
      albumStats: {
        "Midnight Blassic": 3,
        "ApolloRed1 Vs the World": 2,
        "Tantrum": 1
      }
    },
    {
      name: "Homixide Gang",
      onstage: "7:30 PM",
      songs: [
        "K9ine (New song)",
        "Lifestyle",
        "PC5",
        "REDRAG",
        "VILLAIN",
        "5G",
        "R50",
        "FACET!ME",
        "Uzi Work",
        "Drakon !",
        "5unna"
      ],
      uniqueSongs: ["K9ine (New song)"],
      albumStats: {
        "Homixide Lifestyle 2": 5,
        "Homixide Lifestyle": 2,
        "i5u5we5": 1,
        "Snot or Not": 1,
        "Snotty World": 1,
        "Others": 1
      }
    },
    {
      name: "Destroy Lonely",
      onstage: "8:00 PM",
      songs: [
        "LOCK IN",
        "jumanji",
        "SYRUP SIPPIN",
        "DOUBT IT",
        "BLITZ",
        "FAKENGGAS",
        "ABOUT MONEY",
        "catch a kill",
        "screwed up",
        "risk",
        "how u feel?",
        "NEVEREVER",
        "NOSTYLIST",
        "if looks could kill"
      ],
      uniqueSongs: [],
      albumStats: {
        "LOVE LASTS FOREVER": 4,
        "NO STYLIST": 4,
        "<3³": 3,
        "If Looks Could Kill": 3
      }
    },
    {
      name: "Ken Carson",
      onstage: "8:45 PM",
      songs: [
        "Lord Of Chaos",
        "Blakk Rokkstar",
        "Money Spread",
        "delusional",
        "It's Over",
        "Lose It",
        "Green Room",
        "mewtwo",
        "i need u",
        "Succubus",
        "Me N My Kup",
        "Rock N Roll",
        "Freestyle 2",
        "ss",
        "overseas",
        "Fighting My Demons"
      ],
      uniqueSongs: [],
      albumStats: {
        "A Great Chaos": 10,
        "More Chaos": 3,
        "Project X": 1,
        "X": 1,
        "Others": 1
      }
    },
    {
      name: "Playboi Carti",
      onstage: "9:40 PM",
      songs: [
        "POP OUT",
        "POP OUT (Played again)",
        "OPM BABI",
        "CRANK",
        "COCAINE NOSE",
        "OVERLY",
        "CHARGE DEM HOES A FEE",
        "K POP",
        "LIKE WEEZY",
        "GOOD CREDIT",
        "HBA",
        "Stop Breathing",
        "On That Time",
        "Rockstar Made",
        "R.I.P.",
        "Rockstar (New song)",
        "Timeless (The Weeknd cover)",
        "EVIL JORDAN",
        "ILoveUIHateU",
        "2024",
        "Shoota",
        "Location",
        "Long Time (Intro)",
        "Sky",
        "FE!N (Travis Scott cover)",
        "TOXIC",
        "OLYMPIAN",
        "Made It This Far (New song)",
        "Made It This Far (Played again)"
      ],
      uniqueSongs: [
        "Rockstar (New song)",
        "Timeless (The Weeknd cover)",
        "Made It This Far (New song, shortened after Carti stopped show to help fans)"
      ],
      albumStats: {
        "MUSIC": 15,
        "Whole Lotta Red": 5,
        "Die Lit": 3,
        "Others": 3,
        "Covers": 2,
        "Playboi Carti": 1
      }
    }
  ]
},
{
  city: "St. Paul",
  state: "MN",
  venue: "Grand Casino Arena",
  date: "2025-10-23",
  lat: 45.995,
  lon: -93.295,
  defaultArtistIndex: 4,
  artists: [
    {
      name: "ApolloRed1",
      onstage: "N/A",
      songs: [
        "#ARP",
        "Georgia Boy",
        "RedFlag",
        "Face Tattoos",
        "PBrazy",
        "Profit"
      ],
      uniqueSongs: ["#ARP (new addition to set)"],
      albumStats: {
        "Midnight Blassic": 3,
        "ApolloRed1 Vs the World": 2,
        "Tantrum": 1
      }
    },
    {
      name: "Homixide Gang",
      onstage: "N/A",
      songs: [
        "Lifestyle",
        "PC5",
        "REDRAG",
        "VILLAIN",
        "5G",
        "R50",
        "FACET!ME",
        "Uzi Work",
        "Drakon !"
      ],
      uniqueSongs: [],
      albumStats: {
        "Homixide Lifestyle 2": 5,
        "Homixide Lifestyle": 2,
        "i5u5we5": 1,
        "Snot or Not": 1
      }
    },
    {
      name: "Destroy Lonely",
      onstage: "N/A",
      songs: [
        "LOCK IN",
        "jumanji",
        "SYRUP SIPPIN",
        "DOUBT IT",
        "BLITZ",
        "FAKENGGAS",
        "ABOUT MONEY",
        "catch a kill",
        "screwed up",
        "risk",
        "how u feel?",
        "NEVEREVER",
        "NOSTYLIST",
        "if looks could kill"
      ],
      uniqueSongs: ["(Setlist incomplete according to attendees)"],
      albumStats: {
        "LOVE LASTS FOREVER": 4,
        "NO STYLIST": 4,
        "<3³": 3,
        "If Looks Could Kill": 3
      }
    },
    {
      name: "Ken Carson",
      onstage: "N/A",
      songs: [
        "Lord Of Chaos",
        "Blakk Rokkstar",
        "Money Spread",
        "delusional",
        "It's Over",
        "Lose It",
        "Green Room",
        "mewtwo",
        "i need u",
        "Succubus",
        "Me N My Kup",
        "Rock N Roll",
        "Freestyle 2",
        "ss",
        "overseas",
        "Fighting My Demons"
      ],
      uniqueSongs: [],
      albumStats: {
        "A Great Chaos": 10,
        "More Chaos": 3,
        "Project X": 1,
        "X": 1,
        "Others": 1
      }
    },
    {
      name: "Playboi Carti",
      onstage: "N/A",
      songs: [
        "POP OUT (New version of the extended intro played)",
        "POP OUT (Played again)",
        "OPM BABI",
        "CRANK",
        "COCAINE NOSE",
        "OVERLY",
        "CHARGE DEM HOES A FEE",
        "LIKE WEEZY",
        "HBA",
        "Stop Breathing",
        "Rockstar Made",
        "R.I.P.",
        "Timeless (The Weeknd cover)",
        "EVIL JORDAN",
        "Shoota",
        "Long Time (Intro) (Restarted)",
        "FE!N (Travis Scott cover)",
        "TOXIC",
        "OLYMPIAN",
        "Made It This Far (New song)",
        "FINE SHIT"
      ],
      uniqueSongs: [
        "Made It This Far (New song)",
        "FINE SHIT (Setlist debut)",
        "POP OUT (new extended intro version)"
      ],
      albumStats: {
        "MUSIC": 13,
        "Die Lit": 3,
        "Whole Lotta Red": 2,
        "Covers": 2,
        "Others": 1
      },
      notes: "Carti arrived ~35 minutes late, cutting several songs from the set."
    }
  ]
},

		{
  city: "Kansas City",
  state: "MO",
  venue: "T-Mobile Center",
  date: "2025-10-24",
  lat: 39.097,
  lon: -94.579,
  defaultArtistIndex: 4,
  artists: [
    {
      name: "ApolloRed1",
      onstage: "7:00 PM",
      songs: [
        "Georgia Boy",
        "RedFlag",
        "Face Tattoos",
        "PBrazy",
        "Profit"
      ],
      uniqueSongs: [],
      albumStats: {
        "Midnight Blassic": 3,
        "ApolloRed1 Vs the World": 1,
        "Tantrum": 1
      }
    },
    {
      name: "Homixide Gang",
      onstage: "7:55 PM",
      songs: [
        "5G",
        "FACET!ME",
        "Uzi Work",
        "Holler!"
      ],
      uniqueSongs: ["Holler! (Tour Debut)"],
      albumStats: {
        "Homixide Lifestyle 2": 2,
        "Snot or Not": 1,
        "Snotty World": 1
      },
      notes: "Setlist incomplete; only four songs confirmed."
    },
    {
      name: "Destroy Lonely",
      onstage: "8:40 PM",
      songs: [
        "LOCK IN",
        "kansas (Live debut)",
        "SYRUP SIPPIN",
        "DOUBT IT",
        "BLITZ",
        "FAKENGGAS",
        "ABOUT MONEY",
        "catch a kill",
        "screwed up",
        "risk",
        "how u feel?",
        "NEVEREVER",
        "NOSTYLIST",
        "if looks could kill"
      ],
      uniqueSongs: ["kansas (Live debut)"],
      albumStats: {
        "LOVE LASTS FOREVER": 4,
        "NO STYLIST": 4,
        "<3³": 3,
        "If Looks Could Kill": 3
      }
    },
    {
      name: "Ken Carson",
      onstage: "9:25 PM",
      songs: [
        "Lord Of Chaos",
        "Blakk Rokkstar",
        "Money Spread",
        "delusional",
        "It's Over",
        "Lose It",
        "Green Room",
        "mewtwo",
        "i need u",
        "Succubus",
        "Me N My Kup",
        "Rock N Roll",
        "Freestyle 2",
        "ss",
        "overseas",
        "Fighting My Demons"
      ],
      uniqueSongs: [],
      albumStats: {
        "A Great Chaos": 10,
        "More Chaos": 3,
        "Project X": 1,
        "X": 1,
        "Others": 1
      }
    },
    {
      name: "Playboi Carti",
      onstage: "10:00 PM",
      songs: [
        "POP OUT",
        "POP OUT (Played again)",
        "OPM BABI",
        "CRANK",
        "COCAINE NOSE",
        "OVERLY",
        "CHARGE DEM HOES A FEE",
        "K POP",
        "LIKE WEEZY",
        "GOOD CREDIT",
        "HBA",
        "Stop Breathing",
        "On That Time",
        "Rockstar Made",
        "R.I.P.",
        "Rockstar (New song)",
        "Timeless (The Weeknd cover)",
        "EVIL JORDAN",
        "ILoveUIHateU",
        "2024",
        "Shoota",
        "Location",
        "Long Time (Intro)",
        "Sky",
        "FE!N (Travis Scott cover)",
        "TOXIC",
        "FOMDJ",
        "ALIVE",
        "Made It This Far (New song)"
      ],
      uniqueSongs: [
        "Rockstar (New song)",
        "Made It This Far (New song)"
      ],
      albumStats: {
        "MUSIC": 15,
        "Whole Lotta Red": 5,
        "Die Lit": 3,
        "Others": 3,
        "Covers": 2,
        "Playboi Carti": 1
      }
    }
  ]
},
		{
  city: "Columbus",
  state: "OH",
  venue: "Nationwide Arena",
  date: "2025-10-28",
  lat: 39.969,
  lon: -83.006,
  defaultArtistIndex: 4,
  artists: [
    {
      name: "ApolloRed1",
      onstage: "7:00 PM",
      songs: [
        "Georgia Boy",
        "RedFlag",
        "Face Tattoos",
        "PBrazy",
        "Profit"
      ],
      uniqueSongs: [],
      albumStats: {
        "Midnight Blassic": 3,
        "ApolloRed1 Vs the World": 1,
        "Tantrum": 1
      }
    },
    {
      name: "Homixide Gang",
      onstage: "7:20 PM",
      songs: [
        "Lifestyle",
        "PC5",
        "REDRAG",
        "VILLAIN",
        "5G",
        "R50",
        "FACET!ME",
        "Uzi Work",
        "Drakon !",
        "5unna"
      ],
      uniqueSongs: [],
      albumStats: {
        "Homixide Lifestyle 2": 5,
        "Homixide Lifestyle": 2,
        "i5u5we5": 1,
        "Snot or Not": 1,
        "Snotty World": 1
      }
    },
    {
      name: "Destroy Lonely",
      onstage: "7:50 PM",
      songs: [
        "LOCK IN",
        "SYRUP SIPPIN",
        "DOUBT IT",
        "BLITZ",
        "FAKENGGAS",
        "ABOUT MONEY",
        "catch a kill",
        "screwed up",
        "In The Air (Tour Debut)",
        "how u feel?",
        "NEVEREVER",
        "NOSTYLIST",
        "if looks could kill"
      ],
      uniqueSongs: ["In The Air (Tour Debut)"],
      albumStats: {
        "LOVE LASTS FOREVER": 4,
        "NO STYLIST": 4,
        "If Looks Could Kill": 3,
        "<3³": 1,
        "Others": 1
      }
    },
    {
      name: "Ken Carson",
      onstage: "8:35 PM",
      songs: [
        "Lord Of Chaos",
        "Blakk Rokkstar",
        "Money Spread",
        "delusional",
        "It's Over",
        "Lose It",
        "Green Room",
        "mewtwo",
        "i need u",
        "Succubus",
        "Me N My Kup",
        "Rock N Roll",
        "Freestyle 2",
        "ss",
        "overseas",
        "Fighting My Demons"
      ],
      uniqueSongs: [],
      albumStats: {
        "A Great Chaos": 10,
        "More Chaos": 3,
        "Project X": 1,
        "X": 1,
        "Others": 1
      }
    },
    {
      name: "Playboi Carti",
      onstage: "10:00 PM",
      songs: [
        "POP OUT",
        "POP OUT (Played again)",
        "OPM BABI",
        "CRANK",
        "COCAINE NOSE",
        "OVERLY",
        "CHARGE DEM HOES A FEE",
        "K POP",
        "LIKE WEEZY",
        "GOOD CREDIT",
        "HBA",
        "Stop Breathing",
        "On That Time",
        "Rockstar Made",
        "R.I.P.",
        "Rockstar (New song)",
        "Timeless (The Weeknd cover)",
        "EVIL JORDAN",
        "ILoveUIHateU",
        "2024",
        "Shoota",
        "Location",
        "Long Time (Intro)",
        "Sky",
        "Made It This Far (New song)"
      ],
      uniqueSongs: [
        "Rockstar (New song)",
        "Made It This Far (New song)"
      ],
      albumStats: {
        "MUSIC": 13,
        "Whole Lotta Red": 5,
        "Die Lit": 3,
        "Others": 2,
        "Playboi Carti": 1,
        "Covers": 1
      }
    }
  ]
},
{
  city: "Chicago",
  state: "IL",
  venue: "United Center",
  date: "2025-10-30",
  lat: 41.880,
  lon: -87.674,
  defaultArtistIndex: 4,
  artists: [
    {
      name: "ApolloRed1",
      onstage: "7:00 PM",
      songs: [
        "#ARP",
        "Georgia Boy",
        "RedFlag",
        "Face Tattoos",
        "PBrazy"
      ],
      uniqueSongs: [],
      albumStats: {
        "Midnight Blassic": 3,
        "ApolloRed1 Vs the World": 1,
        "Tantrum": 1
      }
    },
    {
      name: "Homixide Gang",
      onstage: "7:35 PM",
      songs: [
        "Lifestyle",
        "PC5",
        "REDRAG",
        "VILLAIN",
        "5G",
        "R50",
        "FACET!ME",
        "Uzi Work",
        "Drakon !"
      ],
      uniqueSongs: [],
      albumStats: {
        "Homixide Lifestyle 2": 5,
        "Homixide Lifestyle": 2,
        "i5u5we5": 1,
        "Snot or Not": 1
      }
    },
    {
      name: "Destroy Lonely",
      onstage: "7:55 PM",
      songs: [
        "LOCK IN",
        "jumanji",
        "SYRUP SIPPIN",
        "DOUBT IT",
        "BLITZ",
        "In The Air",
        "FAKENGGAS",
        "ABOUT MONEY",
        "catch a kill",
        "screwed up",
        "risk",
        "how u feel?",
        "NEVEREVER",
        "NOSTYLIST",
        "if looks could kill"
      ],
      uniqueSongs: [],
      albumStats: {
        "LOVE LASTS FOREVER": 4,
        "NO STYLIST": 4,
        "<3³": 3,
        "If Looks Could Kill": 3,
        "Others": 1
      },
      notes: "Setlist marked incomplete by attendees."
    },
    {
      name: "Ken Carson",
      onstage: "8:40 PM",
      songs: [
        "Lord Of Chaos",
        "Blakk Rokkstar",
        "Money Spread",
        "delusional",
        "It's Over",
        "Lose It",
        "Green Room",
        "mewtwo",
        "i need u",
        "Succubus",
        "Me N My Kup",
        "Rock N Roll",
        "Freestyle 2",
        "ss",
        "overseas",
        "Fighting My Demons"
      ],
      uniqueSongs: [],
      albumStats: {
        "A Great Chaos": 10,
        "More Chaos": 3,
        "Project X": 1,
        "X": 1,
        "Others": 1
      }
    },
    {
      name: "Playboi Carti",
      onstage: "9:35 PM",
      songs: [
        "POP OUT",
        "POP OUT (Played again)",
        "OPM BABI",
        "CRANK",
        "COCAINE NOSE",
        "OVERLY",
        "CHARGE DEM HOES A FEE",
        "K POP",
        "LIKE WEEZY",
        "GOOD CREDIT",
        "HBA",
        "Stop Breathing",
        "On That Time",
        "Rockstar Made",
        "R.I.P.",
        "CARNIVAL (Ye cover / Tour debut)",
        "Rockstar (New song / Shortened)",
        "Timeless (The Weeknd cover)",
        "EVIL JORDAN",
        "ILoveUIHateU",
        "2024",
        "Shoota",
        "Location",
        "Long Time (Intro)",
        "Sky",
        "FE!N (Travis Scott cover)",
        "TOXIC",
        "Made It This Far (New song)"
      ],
      uniqueSongs: [
        "CARNIVAL (Ye cover / Tour debut)",
        "Rockstar (New song / Shortened)",
        "Made It This Far (New song)"
      ],
      albumStats: {
        "MUSIC": 14,
        "Whole Lotta Red": 5,
        "Die Lit": 3,
        "Others": 2,
        "Playboi Carti": 1,
        "Covers": 3
      }
    }
  ]
},
{
  city: "Detroit",
  state: "MI",
  venue: "Little Caesars Arena",
  date: "2025-10-31",
  lat: 42.341,
  lon: -83.055,
  defaultArtistIndex: 4,
  artists: [
    {
      name: "ApolloRed1",
      onstage: "6:55 PM",
      songs: [
        "#ARP",
        "Georgia Boy",
        "RedFlag",
        "Face Tattoos",
        "PBrazy",
        "Profit"
      ],
      uniqueSongs: [],
      albumStats: {
        "Midnight Blassic": 3,
        "ApolloRed1 Vs the World": 2,
        "Tantrum": 1
      }
    },
    {
      name: "Homixide Gang",
      onstage: "7:20 PM",
      songs: [
        "Lifestyle",
        "PC5",
        "REDRAG",
        "VILLAIN",
        "5G",
        "R50",
        "FACET!ME",
        "Uzi Work",
        "Drakon !",
        "5unna"
      ],
      uniqueSongs: [],
      albumStats: {
        "Homixide Lifestyle 2": 5,
        "Homixide Lifestyle": 2,
        "i5u5we5": 1,
        "Snot or Not": 1,
        "Snotty World": 1
      }
    },
    {
      name: "Destroy Lonely",
      onstage: "7:50 PM",
      songs: [
        "LOCK IN",
        "SYRUP SIPPIN",
        "DOUBT IT",
        "BLITZ",
        "FAKENGGAS",
        "ABOUT MONEY",
        "catch a kill",
        "screwed up",
        "In The Air",
        "how u feel?",
        "NEVEREVER",
        "NOSTYLIST",
        "if looks could kill"
      ],
      uniqueSongs: [],
      albumStats: {
        "LOVE LASTS FOREVER": 4,
        "NO STYLIST": 4,
        "If Looks Could Kill": 3,
        "<3³": 1,
        "Others": 1
      }
    },
    {
      name: "Ken Carson",
      onstage: "8:35 PM",
      songs: [
        "Lord Of Chaos",
        "Blakk Rokkstar",
        "Money Spread",
        "delusional",
        "It's Over",
        "Lose It",
        "Green Room",
        "mewtwo",
        "i need u",
        "Succubus",
        "yes (Live debut)",
        "Me N My Kup",
        "Rock N Roll",
        "Freestyle 2",
        "ss",
        "overseas",
        "Fighting My Demons"
      ],
      uniqueSongs: ["yes (Live debut)"],
      albumStats: {
        "A Great Chaos": 10,
        "More Chaos": 3,
        "Others": 2,
        "Project X": 1,
        "X": 1
      }
    },
    {
      name: "Playboi Carti",
      onstage: "9:50 PM",
      songs: [
        "POP OUT",
        "POP OUT (Played again)",
        "OPM BABI",
        "CRANK",
        "COCAINE NOSE",
        "OVERLY",
        "CHARGE DEM HOES A FEE",
        "K POP",
        "LIKE WEEZY",
        "GOOD CREDIT",
        "HBA",
        "We Paid (Lil Baby cover, with Lil Baby & 42 Dugg)",
        "Freestyle (with Lil Baby)",
        "Stop Breathing",
        "On That Time",
        "Rockstar Made",
        "R.I.P.",
        "Rockstar (Shortened)",
        "Timeless (The Weeknd cover)",
        "EVIL JORDAN",
        "ILoveUIHateU",
        "2024",
        "Shoota",
        "Location",
        "Long Time (Intro)",
        "Made It This Far"
      ],
      uniqueSongs: [
        "We Paid (Lil Baby cover, with Lil Baby & 42 Dugg)",
        "Freestyle (with Lil Baby)"
      ],
      albumStats: {
        "MUSIC": 13,
        "Whole Lotta Red": 4,
        "Die Lit": 3,
        "Covers": 3,
        "Others": 2,
        "Playboi Carti": 1
      },
      notes: "Carti brought out Lil Baby, Veeze, Rylo Rodriguez & 42 Dugg on stage."
    }
  ]
},
{
  city: "Pittsburgh",
  state: "PA",
  venue: "PPG Paints Arena",
  date: "2025-11-01",
  lat: 40.439,
  lon: -79.989,
  defaultArtistIndex: 4,
  artists: [
    {
      name: "ApolloRed1",
      onstage: "7:00 PM",
      songs: [
        "#ARP",
        "Georgia Boy",
        "RedFlag",
        "Face Tattoos",
        "PBrazy",
        "Profit"
      ],
      uniqueSongs: [],
      albumStats: {
        "Midnight Blassic": 3,
        "ApolloRed1 Vs the World": 2,
        "Tantrum": 1
      },
      notes: "Came down onto right truck to perform 'Profit'."
    },
    {
      name: "Homixide Gang",
      onstage: "7:20 PM",
      songs: [
        "Lifestyle",
        "PC5",
        "REDRAG",
        "VILLAIN",
        "5G",
        "R50",
        "FACET!ME",
        "Uzi Work",
        "Drakon !",
        "5unna"
      ],
      uniqueSongs: [],
      albumStats: {
        "Homixide Lifestyle 2": 5,
        "Homixide Lifestyle": 2,
        "i5u5we5": 1,
        "Snot or Not": 1,
        "Snotty World": 1
      }
    },
    {
      name: "Destroy Lonely",
      onstage: "7:50 PM",
      songs: [
        "LOCK IN",
        "SYRUP SIPPIN",
        "DOUBT IT",
        "BLITZ",
        "FAKENGGAS",
        "ABOUT MONEY",
        "catch a kill",
        "screwed up",
        "In The Air",
        "how u feel?",
        "NEVEREVER",
        "NOSTYLIST",
        "if looks could kill"
      ],
      uniqueSongs: [],
      albumStats: {
        "LOVE LASTS FOREVER": 4,
        "NO STYLIST": 4,
        "If Looks Could Kill": 3,
        "<3³": 1,
        "Others": 1
      }
    },
    {
      name: "Ken Carson",
      onstage: "8:35 PM",
      songs: [
        "Lord Of Chaos",
        "Blakk Rokkstar",
        "Money Spread",
        "delusional",
        "It's Over",
        "Lose It",
        "Green Room",
        "mewtwo",
        "i need u",
        "Succubus",
        "yes",
        "Me N My Kup",
        "Rock N Roll",
        "Freestyle 2",
        "ss",
        "overseas",
        "Fighting My Demons"
      ],
      uniqueSongs: [],
      albumStats: {
        "A Great Chaos": 10,
        "More Chaos": 3,
        "Others": 2,
        "Project X": 1,
        "X": 1
      }
    },
    {
      name: "Playboi Carti",
      onstage: "9:45 PM",
      songs: [
        "POP OUT",
        "POP OUT (Played again)",
        "OPM BABI",
        "CRANK",
        "COCAINE NOSE",
        "OVERLY",
        "CHARGE DEM HOES A FEE",
        "K POP",
        "LIKE WEEZY",
        "GOOD CREDIT",
        "HBA",
        "Stop Breathing",
        "On That Time",
        "Rockstar Made",
        "R.I.P.",
        "Timeless (The Weeknd cover)",
        "EVIL JORDAN",
        "ILoveUIHateU",
        "Place (Tour debut)",
        "Shoota",
        "Location",
        "Long Time (Intro)",
        "Sky",
        "FE!N (Travis Scott cover)",
        "TOXIC",
        "OLYMPIAN",
        "Made It This Far"
      ],
      uniqueSongs: ["Place (Tour debut)"],
      albumStats: {
        "MUSIC": 14,
        "Whole Lotta Red": 6,
        "Die Lit": 3,
        "Covers": 2,
        "Others": 2,
        "Playboi Carti": 1
      }
    }
  ]
},
{
  city: "Boston",
  state: "MA",
  venue: "TD Garden",
  date: "2025-11-04",
  lat: 42.366,
  lon: -71.062,
  defaultArtistIndex: 3,
  artists: [
    {
      name: "Homixide Gang",
      onstage: "7:00 PM",
      songs: [
        "Lifestyle",
        "PC5",
        "REDRAG",
        "VILLAIN",
        "5G",
        "FACET!ME",
        "Uzi Work",
        "Drakon !",
        "5unna"
      ],
      uniqueSongs: [],
      albumStats: {
        "Homixide Lifestyle 2": 5,
        "Homixide Lifestyle": 2,
        "Snot or Not": 1,
        "Snotty World": 1
      }
    },
    {
      name: "Destroy Lonely",
      onstage: "7:40 PM",
      songs: [
        "LOCK IN",
        "SYRUP SIPPIN",
        "DOUBT IT",
        "BLITZ",
        "FAKENGGAS",
        "ABOUT MONEY",
        "catch a kill",
        "screwed up",
        "In The Air",
        "how u feel?",
        "NEVEREVER",
        "NOSTYLIST",
        "if looks could kill"
      ],
      uniqueSongs: [],
      albumStats: {
        "LOVE LASTS FOREVER": 4,
        "NO STYLIST": 4,
        "If Looks Could Kill": 3,
        "<3³": 1,
        "Others": 1
      }
    },
    {
      name: "Ken Carson",
      onstage: "8:20 PM",
      songs: [
        "Lord Of Chaos",
        "Blakk Rokkstar",
        "Money Spread",
        "delusional",
        "It's Over",
        "Lose It",
        "Green Room",
        "mewtwo",
        "i need u",
        "Succubus",
        "yes",
        "Me N My Kup",
        "Rock N Roll",
        "Freestyle 2",
        "ss",
        "overseas",
        "Fighting My Demons"
      ],
      uniqueSongs: [],
      albumStats: {
        "A Great Chaos": 10,
        "More Chaos": 3,
        "Others": 2,
        "Project X": 1,
        "X": 1
      }
    },
    {
      name: "Playboi Carti",
      onstage: "9:30 PM",
      songs: [
        "POP OUT",
        "POP OUT (Played again)",
        "OPM BABI",
        "CRANK",
        "COCAINE NOSE",
        "OVERLY",
        "CHARGE DEM HOES A FEE",
        "K POP",
        "LIKE WEEZY",
        "GOOD CREDIT",
        "HBA",
        "Stop Breathing",
        "On That Time",
        "Rockstar Made",
        "R.I.P.",
        "Timeless (The Weeknd cover)",
        "EVIL JORDAN",
        "ILoveUIHateU",
        "2024",
        "Place",
        "Shoota",
        "Location",
        "Long Time (Intro)",
        "Sky",
        "FE!N (Travis Scott cover)",
        "TOXIC",
        "OLYMPIAN",
        "Made It This Far"
      ],
      uniqueSongs: [],
      albumStats: {
        "MUSIC": 15,
        "Whole Lotta Red": 6,
        "Die Lit": 3,
        "Covers": 2,
        "Playboi Carti": 1,
        "Others": 1
      }
    }
  ],
  notes: "ApolloRed1 did not perform at this show."
},
{
  city: "Brooklyn",
  state: "NY",
  venue: "Barclays Center",
  date: "2025-11-06",
  lat: 40.682,
  lon: -73.975,
  defaultArtistIndex: 4,
  artists: [
    {
      name: "ApolloRed1",
      onstage: "7:00 PM",
      songs: [
        "Ready2Purge",
        "Face Tattoos",
        "#ARP",
        "RedFlag",
        "Profit"
      ],
      uniqueSongs: [],
      albumStats: {
        "ApolloRed1 Vs the World": 2,
        "Midnight Blassic": 2,
        "Tantrum": 1
      },
      notes: "Setlist incomplete."
    },
    {
      name: "Homixide Gang",
      onstage: "7:25 PM",
      songs: [
        "Lifestyle (only the intro)",
        "PC5",
        "REDRAG",
        "VILLAIN",
        "5G",
        "R50",
        "FACET!ME",
        "Uzi Work",
        "Drakon !",
        "5unna"
      ],
      uniqueSongs: ["Lifestyle (only the intro)"],
      albumStats: {
        "Homixide Lifestyle 2": 5,
        "Homixide Lifestyle": 2,
        "i5u5we5": 1,
        "Snot or Not": 1,
        "Snotty World": 1
      }
    },
    {
      name: "Destroy Lonely",
      onstage: "7:50 PM",
      songs: [
        "LOCK IN",
        "SYRUP SIPPIN",
        "DOUBT IT",
        "BLITZ",
        "FAKENGGAS",
        "ABOUT MONEY",
        "catch a kill",
        "screwed up",
        "In The Air",
        "how u feel?",
        "NEVEREVER",
        "NOSTYLIST",
        "if looks could kill"
      ],
      uniqueSongs: [],
      albumStats: {
        "LOVE LASTS FOREVER": 4,
        "NO STYLIST": 4,
        "If Looks Could Kill": 3,
        "<3³": 1,
        "Others": 1
      }
    },
    {
      name: "Ken Carson",
      onstage: "8:35 PM",
      songs: [
        "catastrophe (Live debut; shortened)",
        "Lord Of Chaos",
        "Blakk Rokkstar",
        "Money Spread",
        "delusional",
        "It's Over",
        "Lose It",
        "Green Room",
        "mewtwo",
        "i need u",
        "Succubus",
        "yes",
        "Me N My Kup",
        "Rock N Roll",
        "Freestyle 2",
        "ss",
        "overseas",
        "Fighting My Demons"
      ],
      uniqueSongs: ["catastrophe (Live debut; shortened)"],
      albumStats: {
        "A Great Chaos": 10,
        "More Chaos": 3,
        "Others": 3,
        "Project X": 1,
        "X": 1
      }
    },
    {
      name: "Playboi Carti",
      onstage: "9:50 PM",
      songs: [
        "POP OUT",
        "POP OUT (Played again)",
        "OPM BABI",
        "CRANK",
        "COCAINE NOSE",
        "OVERLY",
        "CHARGE DEM HOES A FEE",
        "K POP",
        "LIKE WEEZY",
        "GOOD CREDIT",
        "HBA",
        "Turks (NAV cover) (with NAV)",
        "Lemonade (Internet Money cover) (with NAV)",
        "Stop Breathing",
        "On That Time",
        "Rockstar Made",
        "R.I.P.",
        "Timeless (The Weeknd cover)",
        "EVIL JORDAN",
        "ILoveUIHateU",
        "2024",
        "Shoota",
        "Location",
        "Long Time (Intro)",
        "Sky",
        "Made It This Far"
      ],
      uniqueSongs: [],
      albumStats: {
        "MUSIC": 13,
        "Whole Lotta Red": 5,
        "Die Lit": 3,
        "Covers": 3,
        "Playboi Carti": 1,
        "Others": 1
      }
    }
  ]
},
{
  city: "Newark",
  state: "NJ",
  venue: "Prudential Center",
  date: "2025-11-07",
  lat: 40.733,
  lon: -74.171,
  defaultArtistIndex: 4,
  artists: [
    {
      name: "ApolloRed1",
      onstage: "7:00 PM",
      songs: [
        "Face Tattoos",
        "PBrazy",
        "Georgia Boy"
      ],
      uniqueSongs: [],
      albumStats: {
        "Midnight Blassic": 3
      },
      notes: "Setlist incomplete."
    },
    {
      name: "Homixide Gang",
      onstage: "7:35 PM",
      songs: [
        "Lifestyle",
        "PC5",
        "REDRAG",
        "VILLAIN",
        "5G"
      ],
      uniqueSongs: [],
      albumStats: {
        "Homixide Lifestyle 2": 4,
        "Homixide Lifestyle": 1
      },
      notes: "Setlist incomplete."
    },
    {
      name: "Destroy Lonely",
      onstage: "7:55 PM",
      songs: [
        "LOCK IN",
        "SYRUP SIPPIN",
        "DOUBT IT",
        "BLITZ",
        "ABOUT MONEY",
        "catch a kill",
        "FAKENGGAS",
        "screwed up",
        "In The Air",
        "how u feel?",
        "NEVEREVER",
        "NOSTYLIST",
        "if looks could kill"
      ],
      uniqueSongs: [],
      albumStats: {
        "LOVE LASTS FOREVER": 4,
        "NO STYLIST": 4,
        "If Looks Could Kill": 3,
        "<3³": 1,
        "Others": 1
      }
    },
    {
      name: "Ken Carson",
      onstage: "8:35 PM",
      songs: [
        "catastrophe",
        "Lord Of Chaos",
        "Blakk Rokkstar",
        "Money Spread",
        "delusional",
        "It's Over",
        "Lose It",
        "Green Room",
        "i need u",
        "Succubus",
        "yes",
        "Me N My Kup",
        "Rock N Roll",
        "Freestyle 2",
        "ss",
        "overseas",
        "Fighting My Demons"
      ],
      uniqueSongs: [],
      albumStats: {
        "A Great Chaos": 9,
        "More Chaos": 3,
        "Others": 2,
        "Project X": 1,
        "X": 1
      }
    },
    {
      name: "Playboi Carti",
      onstage: "9:45 PM",
      songs: [
        "POP OUT",
        "POP OUT (Played again)",
        "OPM BABI",
        "CRANK",
        "COCAINE NOSE",
        "OVERLY",
        "CHARGE DEM HOES A FEE",
        "K POP",
        "LIKE WEEZY",
        "GOOD CREDIT",
        "HBA",
        "Stop Breathing",
        "On That Time",
        "Rockstar Made",
        "R.I.P.",
        "Timeless (The Weeknd cover)",
        "EVIL JORDAN",
        "ILoveUIHateU",
        "2024",
        "Shoota",
        "Location",
        "Long Time (Intro)",
        "FE!N (Travis Scott cover)",
        "CARNIVAL (Ye cover)",
        "TOXIC",
        "OLYMPIAN",
        "Made It This Far"
      ],
      uniqueSongs: [
        "Lil Yachty appeared on stage with Carti"
      ],
      albumStats: {
        "MUSIC": 15,
        "Whole Lotta Red": 4,
        "Die Lit": 3,
        "Covers": 3,
        "Playboi Carti": 1,
        "Others": 1
      },
      notes: "Lil Yachty appeared on stage with Carti."
    }
  ]
},
{
  city: "Hartford",
  state: "CT",
  venue: "PeoplesBank Arena",
  date: "2025-11-08",
  lat: 41.766,
  lon: -72.673,
  defaultArtistIndex: 4,
  artists: [
    {
      name: "ApolloRed1",
      onstage: "7:30 PM",
      songs: [
        "#ARP",
        "Georgia Boy",
        "RedFlag",
        "Face Tattoos",
        "PBrazy"
      ],
      uniqueSongs: [],
      albumStats: {
        "Midnight Blassic": 3,
        "ApolloRed1 Vs the World": 1,
        "Tantrum": 1
      }
    },
    {
      name: "Homixide Gang",
      onstage: "7:50 PM",
      songs: [
        "Lifestyle (Snippet)",
        "PC5",
        "REDRAG",
        "VILLAIN",
        "5G",
        "R50",
        "FACET!ME",
        "Uzi Work",
        "Drakon !",
        "5unna"
      ],
      uniqueSongs: ["Lifestyle (Snippet)"],
      albumStats: {
        "Homixide Lifestyle 2": 5,
        "Homixide Lifestyle": 2,
        "i5u5we5": 1,
        "Snot or Not": 1,
        "Snotty World": 1
      }
    },
    {
      name: "Destroy Lonely",
      onstage: "8:20 PM",
      songs: [
        "LOCK IN",
        "SYRUP SIPPIN",
        "DOUBT IT",
        "BLITZ",
        "FAKENGGAS",
        "ABOUT MONEY",
        "catch a kill",
        "screwed up",
        "In The Air",
        "how u feel?",
        "NEVEREVER",
        "NOSTYLIST",
        "if looks could kill"
      ],
      uniqueSongs: [],
      albumStats: {
        "LOVE LASTS FOREVER": 4,
        "NO STYLIST": 4,
        "If Looks Could Kill": 3,
        "<3³": 1,
        "Others": 1
      }
    },
    {
      name: "Ken Carson",
      onstage: "9:00 PM",
      songs: [
        "Lord Of Chaos",
        "Blakk Rokkstar",
        "Money Spread",
        "delusional",
        "It's Over",
        "Lose It",
        "Green Room",
        "mewtwo",
        "i need u",
        "Succubus",
        "yes",
        "Me N My Kup",
        "Rock N Roll",
        "Freestyle 2",
        "ss",
        "overseas",
        "Fighting My Demons"
      ],
      uniqueSongs: [],
      albumStats: {
        "A Great Chaos": 10,
        "More Chaos": 3,
        "Others": 2,
        "Project X": 1,
        "X": 1
      }
    },
    {
      name: "Playboi Carti",
      onstage: "10:15 PM",
      songs: [
        "POP OUT",
        "POP OUT (Played again)",
        "OPM BABI",
        "CRANK",
        "COCAINE NOSE",
        "OVERLY",
        "CHARGE DEM HOES A FEE",
        "K POP",
        "LIKE WEEZY",
        "GOOD CREDIT",
        "HBA",
        "Stop Breathing",
        "On That Time",
        "Rockstar Made",
        "R.I.P.",
        "Timeless (The Weeknd cover)",
        "EVIL JORDAN",
        "ILoveUIHateU",
        "2024",
        "Shoota",
        "Location",
        "Long Time (Intro)",
        "Sky",
        "FE!N (Travis Scott cover)",
        "CARNIVAL (Ye cover)",
        "Type Shit (Future & Metro Boomin cover)",
        "Made It This Far"
      ],
      uniqueSongs: [],
      albumStats: {
        "MUSIC": 15,
        "Whole Lotta Red": 5,
        "Covers": 4,
        "Die Lit": 3,
        "Playboi Carti": 1,
        "Others": 1
      }
    }
  ]
}

    ];

    // ---------- 2. Guards ----------
    if (typeof shows === "undefined") {
      console.error("Missing `shows` data. Paste your existing shows array where indicated.");
    }

    // ---------- 3. Caching DOM ----------
    const panelBodyEl = document.getElementById("panel-body");
    const songStatsTabBtn = document.getElementById("song-stats-tab");
    const showListTabBtn  = document.getElementById("show-list-tab");

    // ---------- 4. Map (single instance) ----------
    const DETAIL_ZOOM = 6;
    const map = L.map("map", {
      scrollWheelZoom: true,
      zoomControl: true
    }).setView([40, -100], 4);

    L.tileLayer(
      "https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png",
      {
        maxZoom: 18,
        attribution: '&copy; <a href="https://carto.com/">CARTO</a> · basemap'
      }
    ).addTo(map);

    // ---------- 5. Build markers ----------
    const markers = [];
    (Array.isArray(shows) ? shows : []).forEach((show) => {
      const marker = L.circleMarker([show.lat, show.lon], {
        radius: 13,
        weight: 3,
        color: "#f13b56",
        fillColor: "#f13b56",
        fillOpacity: 0.85
      }).addTo(map);

      const dateLabel = formatDate(show.date);
      marker.bindTooltip(
        `<strong>${escapeHtml(show.city)}, ${escapeHtml(show.state || "")}</strong><br/>${escapeHtml(dateLabel)}<br/><em>Click to view details</em>`,
        { direction: "top", opacity: 0.9, sticky: true }
      );

      marker.on("click", () => {
        map.flyTo([show.lat, show.lon], Math.max(map.getZoom(), DETAIL_ZOOM), { duration: 0.7 });
        activateTab("song-stats");
        renderShowDetails(show);
      });

      markers.push(marker);
    });

    // ---------- 6. Panels ----------
    function renderSongStatsPanel() {
      // Aggregate song frequencies across all shows that have setlists
      const songCounts = new Map();
      let totalSongs = 0;

      for (const show of shows) {
        const sets = show.setlist || show.sets || []; // try to be forgiving
        for (const s of sets) {
          const name = (s && s.song) ? s.song : (s && s.name) ? s.name : null;
          if (!name) continue;
          totalSongs++;
          songCounts.set(name, (songCounts.get(name) || 0) + 1);
        }
      }

      const top = [...songCounts.entries()].sort(byCountDesc).slice(0, 25);
      const rows = top.map(([song, count]) => {
        const pct = totalSongs ? Math.round((count / totalSongs) * 100) : 0;
        return `
          <div class="list-item" role="listitem" aria-label="${escapeHtml(song)} count ${count}">
            <div><strong>${escapeHtml(song)}</strong></div>
            <div class="meta">${count} plays · ~${pct}% of tracked songs</div>
            <div class="button-row">
              <span class="chip">Top ${pct || 0}%</span>
            </div>
          </div>
        `;
      }).join("");

      panelBodyEl.innerHTML = `
        <div class="section-label">Overview</div>
        <div class="card">
          <div><strong>Total Shows:</strong> ${(shows || []).length}</div>
          <div class="meta">Unique songs: ${songCounts.size}</div>
        </div>

        <div class="section-label">Most Played</div>
        <div class="list" role="list">${rows || '<div class="meta">No setlist data available.</div>'}</div>
      `;
    }

    function renderShowList() {
      // Group by City, State to make scanning easier
      const byCity = groupBy(shows, s => `${s.city}, ${s.state || ""}`.trim());
      const blocks = [...byCity.entries()].sort(([a], [b]) => a.localeCompare(b)).map(([city, items]) => {
        const list = items
          .sort((a, b) => new Date(a.date) - new Date(b.date))
          .map((show) => {
            const lbl = `${formatDate(show.date)} — ${show.venue || "Venue TBA"}`;
            return `
              <div class="list-item" data-lat="${show.lat}" data-lon="${show.lon}">
                <div><strong>${escapeHtml(lbl)}</strong></div>
                <div class="meta">${escapeHtml(city)}</div>
              </div>
            `;
          }).join("");

        return `
          <div class="card">
            <div class="city">${escapeHtml(city)}</div>
            <div class="list">${list}</div>
          </div>
        `;
      }).join("");

      panelBodyEl.innerHTML = `
        <div class="section-label">All Shows</div>
        ${blocks || '<div class="meta">No shows found.</div>'}
      `;

      // Wire row clicks to fly + open details
      panelBodyEl.querySelectorAll(".list-item[data-lat]").forEach(el => {
        el.addEventListener("click", () => {
          const lat = parseFloat(el.getAttribute("data-lat"));
          const lon = parseFloat(el.getAttribute("data-lon"));
          map.flyTo([lat, lon], Math.max(map.getZoom(), DETAIL_ZOOM), { duration: 0.7 });

          // Find the show in data (first match)
          const show = shows.find(s => +s.lat === lat && +s.lon === lon) || null;
          if (show) {
            activateTab("song-stats");
            renderShowDetails(show);
          }
        });
      });
    }

    function renderShowDetails(show) {
      const cityState = `${show.city}, ${show.state || ""}`.trim();
      const dateLabel = formatDate(show.date);
      const venue = show.venue || "Venue TBA";
      const sets = show.setlist || show.sets || [];

      const setRows = sets.length
        ? sets.map((s, i) => {
            const name = (s && s.song) ? s.song : (s && s.name) ? s.name : `Track ${i+1}`;
            return `<div class="list-item"><div><strong>${escapeHtml(name)}</strong></div></div>`;
          }).join("")
        : '<div class="meta">No setlist available for this show.</div>';

      panelBodyEl.innerHTML = `
        <div class="section-label">Selected Show</div>
        <div class="card">
          <div class="city">${escapeHtml(cityState)}</div>
          <div>${escapeHtml(venue)}</div>
          <div class="meta">${escapeHtml(dateLabel)}</div>
          <div class="button-row">
            <button class="cta" id="back-to-list" type="button">Back to list</button>
            <span class="chip">Zoom ${DETAIL_ZOOM}×</span>
          </div>
        </div>

        <div class="section-label">Setlist</div>
        <div class="list">${setRows}</div>
      `;

      const back = document.getElementById("back-to-list");
      if (back) {
        back.addEventListener("click", () => {
          activateTab("show-list");
          renderShowList();
        });
      }
    }

    // ---------- 7. Tabs ----------
    function activateTab(which) {
      const isStats = which === "song-stats";
      songStatsTabBtn.classList.toggle("active", isStats);
      showListTabBtn.classList.toggle("active", !isStats);
    }

    songStatsTabBtn.addEventListener("click", () => {
      activateTab("song-stats");
      renderSongStatsPanel();
    });
    showListTabBtn.addEventListener("click", () => {
      activateTab("show-list");
      renderShowList();
    });

    // ---------- 8. Initial render ----------
    renderSongStatsPanel();
  </script>
</body>
</html>
